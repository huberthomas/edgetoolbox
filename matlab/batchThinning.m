addpath('..\dependencies\edgeval\')
addpath('..\dependencies\edgeval\mex\')
addpath('..\dependencies\edgeval\utils\')
% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg1_desk/mask/canny', '/home/tom/University/datasets/rgbd_dataset_freiburg1_desk/mask_thinned/canny')
% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg1_desk/mask/deepcontour', '/home/tom/University/datasets/rgbd_dataset_freiburg1_desk/mask_thinned/deepcontour')
% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg1_desk/mask/hed', '/home/tom/University/datasets/rgbd_dataset_freiburg1_desk/mask_thinned/hed')
% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg1_desk/mask/rcf', '/home/tom/University/datasets/rgbd_dataset_freiburg1_desk/mask_thinned/rcf')
% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg1_desk/mask/sobel', '/home/tom/University/datasets/rgbd_dataset_freiburg1_desk/mask_thinned/sobel')
% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg1_desk/mask/structured_forests', '/home/tom/University/datasets/rgbd_dataset_freiburg1_desk/mask_thinned/structured_forests')

% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg1_xyz/mask/canny', '/home/tom/University/datasets/rgbd_dataset_freiburg1_xyz/mask/mask_thinned/canny')
% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg1_xyz/mask/deepcontour', '/home/tom/University/datasets/rgbd_dataset_freiburg1_xyz/mask_thinned/deepcontour')
% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg1_xyz/mask/hed', '/home/tom/University/datasets/rgbd_dataset_freiburg1_xyz/mask_thinned/hed')
% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg1_xyz/mask/rcf', '/home/tom/University/datasets/rgbd_dataset_freiburg1_xyz/mask_thinned/rcf')
% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg1_xyz/mask/sobel', '/home/tom/University/datasets/rgbd_dataset_freiburg1_xyz/mask_thinned/sobel')
% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg1_xyz/mask/structured_forests', '/home/tom/University/datasets/rgbd_dataset_freiburg1_xyz/mask_thinned/structured_forests')

% edgeThinning('/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Backup/2019-02-12_Desktop/Backup/Master-Thesis/datasets/test_dataset/tum/rgbd_dataset_freiburg1_desk/rgb/rcf/rgb_nms','/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Backup/2019-02-12_Desktop/Backup/Master-Thesis/datasets/test_dataset/tum/rgbd_dataset_freiburg1_desk/rgb/rcf/rgb_nms_thinned');
% edgeThinning('/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Backup/2019-02-12_Desktop/Backup/Master-Thesis/datasets/test_dataset/tum/rgbd_dataset_freiburg1_xyz/rgb/rcf/rgb_nms','/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Backup/2019-02-12_Desktop/Backup/Master-Thesis/datasets/test_dataset/tum/rgbd_dataset_freiburg1_xyz/rgb/rcf/rgb_nms_thinned');


% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg2_xyz/mask/canny', '/home/tom/University/datasets/rgbd_dataset_freiburg2_xyz/mask_thinned/canny')
% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg2_xyz/mask/deepcontour', '/home/tom/University/datasets/rgbd_dataset_freiburg2_xyz/mask_thinned/deepcontour')
% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg2_xyz/mask/hed', '/home/tom/University/datasets/rgbd_dataset_freiburg2_xyz/mask_thinned/hed')
% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg2_xyz/mask/rcf', '/home/tom/University/datasets/rgbd_dataset_freiburg2_xyz/mask_thinned/rcf')
% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg2_xyz/mask/sobel', '/home/tom/University/datasets/rgbd_dataset_freiburg2_xyz/mask_thinned/sobel')
% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg2_xyz/mask/structured_forests', '/home/tom/University/datasets/rgbd_dataset_freiburg2_xyz/mask_thinned/structured_forests')

% edgeThinning('/home/tom/University/datasets/rgbd_dataset_freiburg1_rpy/mask/canny', '/home/tom/University/datasets/rgbd_dataset_freiburg1_rpy/mask/mask_thinned/canny')

% edgeThinning('/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/bdcn/BSDS500/data/images/test-nms/', '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/bdcn/BSDS500/data/images/test-thinned/')

% edgeThinning('/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/rcf/BSDS500/data/images/test-nms', '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/rcf/BSDS500/data/images/test-thinned')
% edgeThinning('/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/canny/BSDS500/data/images/test', '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/canny/BSDS500/data/images/test-thinned')
% edgeThinning('/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/multiple_canny_thres_33/BSDS500/data/images/test', '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/multiple_canny_thres_33/BSDS500/data/images/test-thinned')
% edgeThinning('/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/multiple_canny_thres_25/BSDS500/data/images/test', '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/multiple_canny_thres_25/BSDS500/data/images/test-thinned')
% edgeThinning('/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/sobel/BSDS500/data/images/test', '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/sobel/BSDS500/data/images/test-thinned')
%
%
% edgeThinning('/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/hed/BSDS500/data/images/test-nms', '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/hed/BSDS500/data/images/test-thinned')
% edgeThinning('/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/deepcontour/BSDS500/data/images/test-nms', '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/deepcontour/BSDS500/data/images/test-thinned')
% edgeThinning('/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/structured_forests/BSDS500/data/images/test-nms', '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/eval/2018-11-18/structured_forests/BSDS500/data/images/test-thinned')
%
%
% baseDir = '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/datasets/';
% edgeThinning(fullfile(baseDir, 'rgbd_dataset_freiburg1_desk/mask_nms/bdcn'), fullfile(baseDir, 'rgbd_dataset_freiburg1_desk/mask_thinned/bdcn'));
% edgeThinning(fullfile(baseDir, 'rgbd_dataset_freiburg1_rpy/mask_nms/bdcn'), fullfile(baseDir, 'rgbd_dataset_freiburg1_rpy/mask_thinned/bdcn'));
% edgeThinning(fullfile(baseDir, 'rgbd_dataset_freiburg1_xyz/mask_nms/bdcn'), fullfile(baseDir, 'rgbd_dataset_freiburg1_xyz/mask_thinned/bdcn'));
% edgeThinning(fullfile(baseDir, 'rgbd_dataset_freiburg2_xyz/mask_nms/bdcn'), fullfile(baseDir, 'rgbd_dataset_freiburg2_xyz/mask_thinned/bdcn'));
%
% baseDir = '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/datasets/test_dataset/';
% edgeThinning(fullfile(baseDir, 'hdr_fusion/flicker_synthetic/flicker_1/bdcn_nms'), fullfile(baseDir, 'hdr_fusion/flicker_synthetic/flicker_1/bdcn_thinned'));
% edgeThinning(fullfile(baseDir, 'hdr_fusion/smooth_synthetic/flicker_2/bdcn_nms'), fullfile(baseDir, 'hdr_fusion/smooth_synthetic/flicker_2/bdcn_thinned'));
% edgeThinning(fullfile(baseDir, 'nyu_depth_v2/basements/basement_001c/bdcn_nms'), fullfile(baseDir, 'nyu_depth_v2/basements/basement_001c/bdcn_thinned'));
% edgeThinning(fullfile(baseDir, 'nyu_depth_v2/cafe/cafe_0001c/bdcn'), fullfile(baseDir, 'nyu_depth_v2/cafe/cafe_0001c/bdcn_nms'));
% edgeThinning(fullfile(baseDir, 'nyu_depth_v2/classrooms/classroom_0014/bdcn_nms'), fullfile(baseDir, 'nyu_depth_v2/classrooms/classroom_0014/bdcn_thinned'));
%
% edgeThinning(fullfile(baseDir, 'tum/rgbd_dataset_freiburg1_desk/rgb/bdcn_nms'), fullfile(baseDir, 'tum/rgbd_dataset_freiburg1_desk/rgb/bdcn_thinned'));
% edgeThinning(fullfile(baseDir, 'tum/rgbd_dataset_freiburg1_xyz/rgb/bdcn_nms'), fullfile(baseDir, 'tum/rgbd_dataset_freiburg1_xyz/rgb/bdcn_thinned'));
% edgeThinning(fullfile(baseDir, 'tum/rgbd_dataset_freiburg2_xyz/rgb/bdcn_nms'), fullfile(baseDir, 'tum/rgbd_dataset_freiburg2_xyz/rgb/bdcn_thinned'));
%
% baseDir = '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/datasets/desk_daylight_xyz/';
% edgeThinning(fullfile(baseDir, 'mask/bdcn_nms'), fullfile(baseDir, 'mask/bdcn_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/hed_nms'), fullfile(baseDir, 'mask/hed_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/rcf_nms'), fullfile(baseDir, 'mask/rcf_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/structured_forests_nms'), fullfile(baseDir, 'mask/structured_forests_thinned'));
%
% baseDir = '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/datasets/desk_dimmed_xyz/';
% edgeThinning(fullfile(baseDir, 'mask/bdcn_nms'), fullfile(baseDir, 'mask/bdcn_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/hed_nms'), fullfile(baseDir, 'mask/hed_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/rcf_nms'), fullfile(baseDir, 'mask/rcf_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/structured_forests_nms'), fullfile(baseDir, 'mask/structured_forests_thinned'));
%
% baseDir = '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/datasets/desk_neon_xyz/';
% edgeThinning(fullfile(baseDir, 'mask/bdcn_nms'), fullfile(baseDir, 'mask/bdcn_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/hed_nms'), fullfile(baseDir, 'mask/hed_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/rcf_nms'), fullfile(baseDir, 'mask/rcf_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/structured_forests_nms'), fullfile(baseDir, 'mask/structured_forests_thinned'));

% baseDir = '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/datasets/desk_daylight_rpy/';
% edgeThinning(fullfile(baseDir, 'mask/bdcn'), fullfile(baseDir, 'mask/bdcn_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/hed'), fullfile(baseDir, 'mask/hed_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/rcf'), fullfile(baseDir, 'mask/rcf_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/structured_forests'), fullfile(baseDir, 'mask/structured_forests_thinned'));
%
% baseDir = '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/datasets/desk_dimmed_rpy/';
% edgeThinning(fullfile(baseDir, 'mask/bdcn'), fullfile(baseDir, 'mask/bdcn_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/hed'), fullfile(baseDir, 'mask/hed_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/rcf'), fullfile(baseDir, 'mask/rcf_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/structured_forests'), fullfile(baseDir, 'mask/structured_forests_thinned'));
%
% baseDir = '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/datasets/desk_neon_rpy/';
% edgeThinning(fullfile(baseDir, 'mask/bdcn'), fullfile(baseDir, 'mask/bdcn_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/hed'), fullfile(baseDir, 'mask/hed_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/rcf'), fullfile(baseDir, 'mask/rcf_thinned'));
% edgeThinning(fullfile(baseDir, 'mask/structured_forests'), fullfile(baseDir, 'mask/structured_forests_thinned'));
% clear all;
% addpath('/home/tom/University/repositories/projects_archive/edgeval/utils')
% addpath('/home/tom/University/repositories/projects_archive/edgeval/mex')
% inputDir = '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/datasets/'
% outputDir = '/run/user/1000/gvfs/smb-share:server=192.168.0.253,share=data/Master/datasets/all_thinned'
% subDir = {
%     'rgbd_dataset_freiburg1_360',...
%     'rgbd_dataset_freiburg1_desk',...
%     'rgbd_dataset_freiburg1_desk2',...
%     'rgbd_dataset_freiburg1_floor',...
%     'rgbd_dataset_freiburg1_plant',...
%     'rgbd_dataset_freiburg1_room',...
%     'rgbd_dataset_freiburg1_rpy',...
%     'rgbd_dataset_freiburg1_teddy',...
%     'rgbd_dataset_freiburg1_xyz',...
%     'rgbd_dataset_freiburg2_360_hemisphere',...
%     'rgbd_dataset_freiburg2_coke',...
%     'rgbd_dataset_freiburg2_desk',...
%     'rgbd_dataset_freiburg2_desk_with_person',...
%     'rgbd_dataset_freiburg2_dishes',...
%     'rgbd_dataset_freiburg2_flowerbouquet',...
%     'rgbd_dataset_freiburg2_flowerbouquet_brownbackground',...
%     'rgbd_dataset_freiburg2_large_no_loop',...
%     'rgbd_dataset_freiburg2_metallic_sphere',...
%     'rgbd_dataset_freiburg2_metallic_sphere2',...
%     'rgbd_dataset_freiburg2_pioneer_360',...
%     'rgbd_dataset_freiburg2_pioneer_slam',...
%     'rgbd_dataset_freiburg2_xyz',...
%     'rgbd_dataset_freiburg3_cabinet',...
%     'rgbd_dataset_freiburg3_large_cabinet',...
%     'rgbd_dataset_freiburg3_long_office_household',...
%     'rgbd_dataset_freiburg3_nostructure_texture_far',...
%     'rgbd_dataset_freiburg3_nostructure_texture_near_withloop',...
%     'rgbd_dataset_freiburg3_sitting_static',...
%     'rgbd_dataset_freiburg3_structure_notexture_far',...
%     'rgbd_dataset_freiburg3_structure_notexture_near',...
%     'rgbd_dataset_freiburg3_structure_texture_far',...
%     'rgbd_dataset_freiburg3_structure_texture_near',...
%     'rgbd_dataset_freiburg3_teddy',...
%     'rgbd_dataset_freiburg3_walking_xyz'
%     }
% levelDir = {
%     'level0',...
%     'level1',...
%     'level2'
%     }
%
% for i=1:length(subDir)
%     for j=1:length(levelDir)
%         edgeThinning(fullfile(inputDir, subDir{i}, 'rgb', levelDir{j}, 'bdcn_sgd_singleScale_gpu_tum_30k_augplus'), fullfile(outputDir, subDir{i}, levelDir{j}, 'bdcn_sgd_singleScale_gpu_tum_30k_augplus'))
%     end
% end
% inputDir='D:/Nextcloud/master/master_thesis/assets/chapter02/bsds500/nms_inv/'
% outputDir='D:/Nextcloud/master/master_thesis/assets/chapter02/bsds500/thinned/'
% edgeThinning(fullfile(inputDir), fullfile(outputDir))

% I=imread('Z:\Master\eval\BSDS500\hed\test\2018.png')/255;

% ICG.nmsEdgeImage(I)
imgDir='Z:\Master\datasets\test_dataset\hdr_fusion\flicker_synthetic\flicker_1\bdcn\level_0\';
outDir=fullfile(imgDir,'thinned');
images = dir(fullfile(imgDir, '*.png'));
images={images.name};
n=length(images);

if(~exist(outDir, 'dir'))
    mkdir(outDir);
end

for i=1:n, img = images{i}(1:end-4);
    fprintf('Status: %d%%\n', (i/n)*100)
    imwrite(imcomplement(ICG.edgeThinning(ICG.nmsEdgeImage((imread(fullfile(imgDir,images{i})))))),fullfile(outDir,images{i}))
end


% imgDir='D:\Nextcloud\master\master_thesis\assets\chapter02\bsds500\thinned\';
% imwrite(imcomplement(ICG.edgeThinning(ICG.nmsEdgeImage(imcomplement(imread(fullfile(imgDir,'100007.png')))))),fullfile(imgDir,'100007.png'))


% imgDir='D:\Nextcloud\master\master_thesis\assets\chapter02\bsds500\thinned\';
% imwrite(imcomplement(ICG.edgeThinning(ICG.nmsEdgeImage(imcomplement(imread(fullfile(imgDir,'100007.png')))))),fullfile(imgDir,'100007.png'))
% imwrite(imcomplement(ICG.edgeThinning(ICG.nmsEdgeImage(imcomplement(imread(fullfile(imgDir,'128035.png')))))),fullfile(imgDir,'128035.png'))
% imwrite(imcomplement(ICG.edgeThinning(ICG.nmsEdgeImage(imcomplement(imread(fullfile(imgDir,'384022.png')))))),fullfile(imgDir,'384022.png'))


% aBase='D:/Universit�t/xampp/htdocs/master/test_dataset/tum/rgbd_dataset_freiburg2_xyz/rgb/bdcn';
% b = 'rgb_nms_raw/1311867280.549209.png';
% imwrite(imcomplement(imread(fullfile(aBase,b))),fullfile(aBase,b));


% sigma = 4; rg = ceil(3*sigma); f = fspecial('gaussian',[5 5],2);
% tic, J1=conv2(conv2(imPad(I,rg,'symmetric'),f,'valid'),f','valid'); toc
% r=sqrt(6*sigma*sigma+1)-1; tic, J2=convTri(I,r); toc
% figure(1); im(J1); figure(2); im(J2); figure(3); im(abs(J2-J1));
